import{l as A,q as C,_ as D,a as G,m as B,h as v,o as d,c as u,i as h,j as q,b as i,n as T,F as b,r as w,t as E,e as z}from"./index-YTSL6Rgu.js";import{p as M}from"./productStore-oL86sVzy.js";import{c as H}from"./categoryStore-YE6muBVv.js";import{B as X}from"./BannerComponent-V9GnDkeC.js";import{P as J,a as K}from"./PaginationComponent-13aCOajI.js";import{L as Q}from"./LoadingComponent-2tpz7yoz.js";import"./axios-G2rPRu76.js";import"./cartStore-QujK9ZR-.js";import"./sweetalert-tDfAiNOE.js";var Y="Expected a function",N=NaN,Z="[object Symbol]",tt=/^\s+|\s+$/g,et=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,nt=/^0o[0-7]+$/i,rt=parseInt,st=typeof C=="object"&&C&&C.Object===Object&&C,it=typeof self=="object"&&self&&self.Object===Object&&self,at=st||it||Function("return this")(),ct=Object.prototype,dt=ct.toString,ut=Math.max,lt=Math.min,L=function(){return at.Date.now()};function mt(t,e,a){var g,r,l,m,s,c,f=0,_=!1,o=!1,y=!0;if(typeof t!="function")throw new TypeError(Y);e=U(e)||0,S(a)&&(_=!!a.leading,o="maxWait"in a,l=o?ut(U(a.maxWait)||0,e):l,y="trailing"in a?!!a.trailing:y);function x(n){var p=g,P=r;return g=r=void 0,f=n,m=t.apply(P,p),m}function F(n){return f=n,s=setTimeout(k,e),_?x(n):m}function V(n){var p=n-c,P=n-f,O=e-p;return o?lt(O,l-P):O}function W(n){var p=n-c,P=n-f;return c===void 0||p>=e||p<0||o&&P>=l}function k(){var n=L();if(W(n))return I(n);s=setTimeout(k,V(n))}function I(n){return s=void 0,y&&g?x(n):(g=r=void 0,m)}function R(){s!==void 0&&clearTimeout(s),f=0,g=c=r=s=void 0}function $(){return s===void 0?m:I(L())}function j(){var n=L(),p=W(n);if(g=arguments,r=this,c=n,p){if(s===void 0)return F(c);if(o)return s=setTimeout(k,e),x(c)}return s===void 0&&(s=setTimeout(k,e)),m}return j.cancel=R,j.flush=$,j}function S(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ft(t){return!!t&&typeof t=="object"}function pt(t){return typeof t=="symbol"||ft(t)&&dt.call(t)==Z}function U(t){if(typeof t=="number")return t;if(pt(t))return N;if(S(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=S(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(tt,"");var a=ot.test(t);return a||nt.test(t)?rt(t.slice(2),a?2:8):et.test(t)?N:+t}var gt=mt;const ht=A(gt),bt={components:{BannerComponent:X,ProductsCardComponent:J,PaginationComponent:K,LoadingComponent:Q},data(){return{sliceProducts:[],keyWord:"",matchProducts:[]}},methods:{...G(M,["getProducts"]),updateProducts(t){this.sliceProducts=t},goTo(t,e){e.target.blur(),this.$refs.pagination&&this.resetPagination(),t==="products"?(this.keyWord="",this.matchProducts=[],this.$router.push("/products")):(this.keyWord="",this.matchProducts=[],this.$router.push(`/categories/${t}`))},resetPagination(){this.$refs.pagination.resetPage()}},computed:{...B(M,["products","isLoading"]),...B(H,["categories"]),recommendation(){return this.products.filter(t=>t.recommendation)}},created(){this.getProducts(),this.getMatchProducts=ht(t=>{this.keyWord=t.target.value,this.keyWord.trim()!==""?this.matchProducts=this.products.filter(e=>e.title.match(this.keyWord)):this.matchProducts=[]},800)},beforeUnmount(){this.getMatchProducts.cancel()}},yt={class:"container"},Pt={class:"py-72 py-lg-90"},vt={class:"d-flex flex-column flex-lg-row justify-content-lg-between mb-48"},_t={class:"nav nav-underline flex-nowrap text-nowrap overflow-x-auto mb-16 mb-lg-0",role:"tablist"},kt={class:"nav-item",role:"presentation"},Ct=["id","aria-controls","data-bs-target","onClick"],xt={class:"w-75 w-md-50 w-lg-25 d-flex justify-content-lg-end"},jt={class:"w-75"},Tt={class:"tab-content"},wt={class:"row gy-48"},Lt={key:1,class:"mb-0 fs-6 text-center"};function St(t,e,a,g,r,l){const m=v("LoadingComponent"),s=v("BannerComponent"),c=v("ProductsCardComponent"),f=v("PaginationComponent"),_=v("RouterView");return d(),u(b,null,[h(m,{active:t.isLoading,"onUpdate:active":e[0]||(e[0]=o=>t.isLoading=o)},null,8,["active"]),h(s,null,{default:q(()=>[z("線上訂餐 / Menu")]),_:1}),i("div",yt,[i("div",Pt,[i("div",vt,[i("ul",_t,[i("li",kt,[i("button",{class:T(["nav-link fs-6",{active:this.$route.path==="/products"}]),id:"all-tab",type:"button",role:"tab","aria-controls":"all","data-bs-target":"#all","aria-selected":"true",onClick:e[1]||(e[1]=o=>l.goTo("products",o))},"所有餐點",2)]),(d(!0),u(b,null,w(t.categories,o=>(d(),u("li",{key:o,class:"nav-item",role:"presentation"},[i("button",{class:T(["nav-link fs-6",{active:this.$route.path===`/categories/${o.path}`}]),id:o.name+"-tab",type:"button",role:"tab","aria-controls":o.name,"data-bs-target":"#"+o.name,"aria-selected":"false",onClick:y=>l.goTo(o.path,y)},E(o.name),11,Ct)]))),128))]),i("div",xt,[i("div",jt,[i("input",{type:"text",class:"form-control rounded-0 border-top-0 border-start-0 border-end-0",placeholder:"請輸入關鍵字...",onInput:e[2]||(e[2]=(...o)=>t.getMatchProducts&&t.getMatchProducts(...o))},null,32)])])]),i("div",Tt,[i("div",{class:T(["tab-pane show",{active:this.$route.path==="/products"}]),id:"all",role:"tabpanel","aria-labelledby":"all-tab",tabindex:"0"},[i("div",wt,[r.matchProducts.length?(d(),u(b,{key:0},[(d(!0),u(b,null,w(r.matchProducts,o=>(d(),u("div",{class:"col-md-4 col-lg-3 mb-48",key:o.id},[h(c,{item:o},null,8,["item"])]))),128)),h(f,{products:r.matchProducts,onUpdateProducts:l.updateProducts,ref:"pagination"},null,8,["products","onUpdateProducts"])],64)):r.keyWord!==""&&!r.matchProducts.length?(d(),u("p",Lt,"抱歉，沒有符合「 "+E(r.keyWord)+" 」的餐點唷！",1)):(d(),u(b,{key:2},[(d(!0),u(b,null,w(r.sliceProducts,o=>(d(),u("div",{class:"col-md-4 col-lg-3 mb-48",key:o.id},[h(c,{item:o},null,8,["item"])]))),128)),h(f,{products:t.products,onUpdateProducts:l.updateProducts,ref:"pagination"},null,8,["products","onUpdateProducts"])],64))])],2),h(_,{matchProducts:r.matchProducts,"key-word":r.keyWord},null,8,["matchProducts","key-word"])])])])],64)}const Vt=D(bt,[["render",St]]);export{Vt as default};
